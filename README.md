A simple Python script that creates an SHH tunnel and uses “networksetup” on Mac OS X to create a SOCKS proxy using the tunnel.  Simply run the script in a terminal window with a command line option telling it which network interface you’d like to use the tunnel with (e.g. “Wi-Fi”, “Ethernet”, etc).  The script will continue running and to end the tunnel simply quit with Control+C.  The script also nicely resets your network settings if the SSH tunnel closes due to a lose of network connectivity, which is nice when moving a laptop from home to work.  I created this after after upgrading to Mac OS 10.7 and having an issue with SSHTunnel, which is otherwise a great program.

For Mac OS 10.8+, the security settings have changed and the program “networksetup”, which is run by the setproxy.py script, requires admin privileges. Thus, running the script by itself will bring up TWO annoying password dialog boxes. A simple fix (?) for this is to run the script as root (e.g., sudo setproxy.py –off). You still have to enter your password, but only once and not in a dialog box.
